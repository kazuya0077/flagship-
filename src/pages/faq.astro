---
import BaseLayout from '../layouts/BaseLayout.astro';
import { siteConfig } from '../config/site';

const faqs = [
  {
    category: "サービス全般",
    items: [
      {
        q: "どのような学生が対象ですか？",
        a: "理学療法士養成校（大学・専門学校）に通う全学年の学生が対象です。特に国試対策を本格的に始める最終学年の利用が多いですが、低学年のうちから基礎固めとして利用される方も歓迎しています。"
      },
      {
        q: "専門学校生でも参加できますか？",
        a: "はい、もちろんです。大学生・専門学校生問わず、理学療法士を目指すすべての学生を歓迎しています。"
      },
      {
        q: "他の予備校と何が違いますか？",
        a: "「授業」ではなく「自走する力」を重視している点が最大の違いです。講義動画を見るだけでなく、自分で計画を立て、質問し、仲間と励まし合いながら学習習慣を身につける環境を提供します。また、月額500円という圧倒的な低価格も特徴です。"
      }
    ]
  },
  {
    category: "機能・サポート",
    items: [
      {
        q: "Slackを使ったことがなくても大丈夫ですか？",
        a: "はい、問題ありません。入会後に図解入りの利用ガイドをお送りします。スマホアプリでLINEのように直感的に操作できるので、すぐに慣れることができます。"
      },
      {
        q: "質問はいつでもできますか？",
        a: "はい、24時間365日いつでも質問可能です。回答は原則24時間以内に行いますが、内容によっては少しお時間をいただく場合もあります。"
      },
      {
        q: "過去の資料も見れますか？",
        a: "はい、Resource Hub（Canva）にある資料は、入会時期に関わらずすべて閲覧・ダウンロード可能です。"
      }
    ]
  },
  {
    category: "料金・手続き",
    items: [
      {
        q: "支払い方法は何がありますか？",
        a: "クレジットカード決済（Visa, Mastercard, Amex, JCB, Diners Club, Discover）に対応しています。"
      },
      {
        q: "最低契約期間はありますか？",
        a: "いいえ、ありません。1ヶ月単位でいつでも解約可能です。"
      },
      {
        q: "解約方法を教えてください",
        a: "会員専用マイページからいつでも解約手続きが可能です。解約後も、その月の契約満了日まではサービスをご利用いただけます。"
      }
    ]
  }
];
---

<BaseLayout 
  title="よくある質問"
  description="PT国試コミュニティに関するよくある質問と回答をまとめています。"
>
  <section class="page-hero">
    <div class="container text-center">
      <h1 class="page-hero__title scroll-fade-up">FAQ</h1>
      <p class="page-hero__subtitle scroll-fade-up delay-1">
        疑問や不安を解消して、<br>
        安心して学習をスタートさせましょう。
      </p>
    </div>
  </section>

  <section class="section">
    <div class="container container--narrow">
      {faqs.map((group, index) => (
        <div class="faq-group scroll-fade-up">
          <h2 class="faq-group__title">{group.category}</h2>
          <div class="faq-list">
            {group.items.map(item => (
              <div class="faq-accordion">
                <button class="faq-accordion__trigger">
                  <span class="faq-q-mark">Q</span>
                  <span class="faq-q-text">{item.q}</span>
                  <span class="faq-icon"></span>
                </button>
                <div class="faq-accordion__content">
                  <div class="faq-accordion__inner">
                    <span class="faq-a-mark">A</span>
                    <p>{item.a}</p>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>
      ))}

      <div class="contact-box scroll-fade-up">
        <h3 class="contact-box__title">まだ疑問が解決しませんか？</h3>
        <p class="contact-box__text">
          その他のご質問は、以下のメールアドレスまでお気軽にお問い合わせください。
        </p>
        <a href={`mailto:${siteConfig.email}`} class="contact-box__link">{siteConfig.email}</a>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  .page-hero {
    background: var(--bg-cream);
    padding: var(--space-20) 0 var(--space-8);
  }
  
  .page-hero__title {
    font-size: 2.5rem;
    margin-bottom: var(--space-4);
    letter-spacing: 0.1em;
  }
  
  .container--narrow {
    max-width: 800px;
  }
  
  .faq-group {
    margin-bottom: var(--space-12);
  }
  
  .faq-group__title {
    font-size: 1.5rem;
    color: var(--primary);
    margin-bottom: var(--space-6);
    padding-bottom: var(--space-2);
    border-bottom: 2px solid var(--bg-warm);
    display: inline-block;
  }
  
  .faq-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
  }
  
  .faq-accordion {
    background: #fff;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
    overflow: hidden;
  }
  
  .faq-accordion__trigger {
    width: 100%;
    display: flex;
    align-items: center;
    padding: var(--space-5);
    background: none;
    border: none;
    text-align: left;
    cursor: pointer;
    font-family: inherit;
    position: relative;
    transition: background 0.3s;
  }
  
  .faq-accordion__trigger:hover {
    background: var(--bg-warm);
  }
  
  .faq-q-mark {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--primary);
    margin-right: var(--space-4);
    flex-shrink: 0;
  }
  
  .faq-q-text {
    flex: 1;
    font-weight: 700;
    font-size: 1rem;
    padding-right: var(--space-8);
  }
  
  .faq-icon {
    position: relative;
    width: 24px;
    height: 24px;
    flex-shrink: 0;
  }
  
  .faq-icon::before,
  .faq-icon::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    background: var(--primary);
    transition: transform 0.3s ease;
  }
  
  .faq-icon::before {
    width: 16px;
    height: 2px;
    transform: translate(-50%, -50%);
  }
  
  .faq-icon::after {
    width: 2px;
    height: 16px;
    transform: translate(-50%, -50%);
  }
  
  .faq-accordion.active .faq-icon::after {
    transform: translate(-50%, -50%) rotate(90deg);
  }
  
  .faq-accordion__content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  }
  
  .logo-accordion.active .faq-accordion__content {
    /* JSで高さ指定 */
  }
  
  .faq-accordion__inner {
    padding: 0 var(--space-5) var(--space-6);
    display: flex;
    border-top: 1px solid var(--border-light);
  }
  
  .faq-a-mark {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-light);
    margin-right: var(--space-4);
    margin-top: var(--space-1);
    flex-shrink: 0;
  }
  
  .contact-box {
    text-align: center;
    padding: var(--space-10);
    background: var(--bg-cream);
    border-radius: var(--radius-xl);
    margin-top: var(--space-16);
  }
  
  .contact-box__title {
    font-size: 1.25rem;
    margin-bottom: var(--space-4);
  }
  
  .contact-box__link {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--primary);
    text-decoration: underline;
  }
</style>

<script>
  // Accordion
  const triggers = document.querySelectorAll('.faq-accordion__trigger');
  
  triggers.forEach(trigger => {
    trigger.addEventListener('click', () => {
      const parent = trigger.parentElement;
      const content = parent?.querySelector('.faq-accordion__content') as HTMLElement;
      
      parent?.classList.toggle('active');
      
      if (parent?.classList.contains('active')) {
        content.style.maxHeight = content.scrollHeight + 'px';
      } else {
        content.style.maxHeight = '0';
      }
    });
  });

  // Scroll Fade
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, { threshold: 0.1 });
  
  document.querySelectorAll('.scroll-fade-up').forEach(el => observer.observe(el));
</script>
