---
import BaseLayout from '../layouts/BaseLayout.astro';

const steps = [
  {
    number: "01",
    title: "決済ページへ進む",
    description: "下のボタンから決済ページへ進み、月額500円（税込）の登録を行います。"
  },
  {
    number: "02",
    title: "Slack招待メール受信",
    description: "決済完了後、登録アドレス宛にSlackコミュニティへの招待リンクが届きます。"
  },
  {
    number: "03",
    title: "コミュニティに参加",
    description: "リンクからSlackに参加。まずは自己紹介チャンネルで挨拶しましょう！"
  },
  {
    number: "04",
    title: "学習スタート",
    description: "すべての学習資産にアクセス可能になります。気になることから始めましょう。"
  }
];

const includes = [
  { icon: "message-square", title: "Slackコミュニティ", description: "質問し放題・交流し放題" },
  { icon: "file-text", title: "学習テンプレート", description: "計画表・分析シート等" },
  { icon: "book-open", title: "要点まとめ資料", description: "科目別重要ポイント" },
  { icon: "bar-chart-2", title: "過去問分析", description: "頻出分野の傾向対策" },
  { icon: "calendar", title: "月2回オンラインイベント", description: "勉強会・相談会" },
  { icon: "users", title: "実習/就職サポート", description: "先輩への相談環境" },
];

const Icons = {
  "message-square": `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>`,
  "file-text": `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>`,
  "book-open": `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>`,
  "bar-chart-2": `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg>`,
  "calendar": `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>`,
  "users": `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>`
};
---

<BaseLayout 
  title="入会する"
  description="PT国試コミュニティへの入会方法。月額500円で質問し放題、学習テンプレート、仲間との交流が手に入ります。"
>
  <section class="page-hero">
    <div class="container text-center">
      <h1 class="page-hero__title scroll-fade-up">MEMBERSHIP</h1>
      <p class="page-hero__subtitle scroll-fade-up delay-1">
        月500円で、あなたの学習環境が変わります。<br>
        いつでも解約OK。リスクなく始められます。
      </p>
    </div>
  </section>

  <!-- 料金プラン -->
  <section class="section">
    <div class="container container--narrow">
      <div class="pricing-card scroll-fade-up">
        <div class="pricing-header">
          <div class="pricing-badge">STANDARD PLAN</div>
          <h2 class="pricing-title">月額プラン</h2>
          <div class="pricing-price">
            <span class="currency">¥</span>
            <span class="amount">500</span>
            <span class="period">/月（税込）</span>
          </div>
        </div>
        
        <div class="pricing-content">
          <p class="pricing-desc">以下のすべての機能が含まれています</p>
          <div class="pricing-features">
            {includes.map((item) => (
              <div class="feature-row">
                <div class="feature-icon">
                  <Fragment set:html={Icons[item.icon]} />
                </div>
                <div class="feature-text">
                  <strong>{item.title}</strong>
                  <span>{item.description}</span>
                </div>
              </div>
            ))}
          </div>
          
          <div class="text-center mt-8">
            <button class="btn btn--primary btn--lg pricing-cta" disabled>
              準備中
            </button>
            <p class="pricing-note">現在、決済システムの準備中です。もうしばらくお待ちください。</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 入会フロー -->
  <section class="section section--cream">
    <div class="container">
      <div class="section-header text-center scroll-fade-up">
        <span class="section-label">FLOW</span>
        <h2 class="section-title">入会までの流れ</h2>
      </div>
      
      <div class="steps-list">
        {steps.map((step, index) => (
          <div class="step-card scroll-fade-up" style={`transition-delay: ${index * 0.1}s`}>
            <div class="step-number">{step.number}</div>
            <h3 class="step-title">{step.title}</h3>
            <p class="step-desc">{step.description}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- FAQ for Join -->
  <section class="section">
    <div class="container container--narrow">
      <div class="section-header text-center scroll-fade-up">
        <span class="section-label">Q&A</span>
        <h2 class="section-title">よくある質問</h2>
      </div>
      
      <div class="faq-simple">
        <div class="faq-item scroll-fade-up">
          <h4 class="faq-q">支払い方法は何がありますか？</h4>
          <p class="faq-a">クレジットカード決済（Visa, Mastercard, Amex, JCB, Diners Club, Discover）に対応しています。</p>
        </div>
        <div class="faq-item scroll-fade-up">
          <h4 class="faq-q">月の途中から入会した場合の料金は？</h4>
          <p class="faq-a">入会日から1ヶ月ごとの請求となります。いつ入会しても損をすることはありません。</p>
        </div>
        <div class="faq-item scroll-fade-up">
          <h4 class="faq-q">解約はどうすればいいですか？</h4>
          <p class="faq-a">マイページまたは運営への連絡で簡単に解約できます。引き止めなどは一切行いません。</p>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  .page-hero {
    background: var(--gradient-hero);
    color: #fff;
    padding: var(--space-20) 0;
  }
  
  .page-hero__title {
    color: #fff;
    font-size: 3rem;
    margin-bottom: var(--space-4);
    letter-spacing: 0.1em;
  }
  
  .page-hero__subtitle {
    color: rgba(255,255,255,0.9);
    font-size: 1.1rem;
  }
  
  .container--narrow {
    max-width: 800px;
  }
  
  /* Pricing Card */
  .pricing-card {
    background: #fff;
    border-radius: var(--radius-2xl);
    box-shadow: var(--shadow-lg);
    overflow: hidden;
    margin-top: -80px; /* ネガティブマージンでヒーローに重ねる */
    position: relative;
    z-index: 10;
  }
  
  .pricing-header {
    background: var(--bg-cream);
    padding: var(--space-8) var(--space-8) var(--space-4);
    text-align: center;
    border-bottom: 1px solid var(--border-light);
  }
  
  .pricing-badge {
    display: inline-block;
    background: var(--primary);
    color: #fff;
    font-size: 0.75rem;
    font-weight: 700;
    padding: 4px 12px;
    border-radius: var(--radius-full);
    margin-bottom: var(--space-4);
    letter-spacing: 0.1em;
  }
  
  .pricing-title {
    font-size: 1.5rem;
    margin-bottom: var(--space-4);
  }
  
  .pricing-price {
    display: flex;
    align-items: baseline;
    justify-content: center;
    color: var(--primary);
  }
  
  .amount {
    font-size: 4rem;
    font-weight: 700;
    line-height: 1;
    font-family: 'Inter', sans-serif;
  }
  
  .currency {
    font-size: 1.5rem;
    margin-right: 4px;
  }
  
  .period {
    font-size: 1rem;
    color: var(--text-light);
  }
  
  .pricing-content {
    padding: var(--space-8);
  }
  
  .pricing-desc {
    text-align: center;
    color: var(--text-light);
    margin-bottom: var(--space-8);
  }
  
  .pricing-features {
    display: grid;
    gap: var(--space-4);
    margin-bottom: var(--space-8);
  }
  
  @media (min-width: 768px) {
    .pricing-features {
      grid-template-columns: repeat(2, 1fr);
    }
  }
  
  .feature-row {
    display: flex;
    align-items: center;
    gap: var(--space-3);
  }
  
  .feature-icon {
    width: 40px;
    height: 40px;
    background: var(--bg-warm);
    color: var(--primary);
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  
  .feature-icon :global(svg) {
    width: 20px;
    height: 20px;
  }
  
  .feature-text {
    display: flex;
    flex-direction: column;
    font-size: 0.9rem;
  }
  
  .feature-text strong {
    color: var(--text);
  }
  
  .feature-text span {
    color: var(--text-light);
    font-size: 0.8rem;
  }
  
  .pricing-cta {
    width: 100%;
    max-width: 400px;
    margin-bottom: var(--space-4);
  }
  
  .pricing-cta:disabled {
    background: #ccc;
    box-shadow: none;
    cursor: not-allowed;
  }
  
  .pricing-note {
    font-size: 0.8rem;
    color: var(--text-muted);
  }
  
  /* Steps */
  .steps-list {
    display: grid;
    gap: var(--space-6);
  }
  
  @media (min-width: 768px) {
    .steps-list {
      grid-template-columns: repeat(4, 1fr);
    }
  }
  
  .step-card {
    background: #fff;
    padding: var(--space-6);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-md);
    position: relative;
    overflow: hidden;
  }
  
  .step-number {
    font-size: 3rem;
    font-weight: 700;
    color: var(--bg-warm);
    font-family: 'Inter', sans-serif;
    position: absolute;
    top: -10px;
    right: -10px;
    opacity: 0.5;
    z-index: 0;
  }
  
  .step-title {
    position: relative;
    z-index: 1;
    font-size: 1.1rem;
    margin-bottom: var(--space-2);
    color: var(--primary);
  }
  
  .step-desc {
    position: relative;
    z-index: 1;
    font-size: 0.9rem;
  }
  
  /* FAQ Simple */
  .faq-simple {
    display: grid;
    gap: var(--space-8);
  }
  
  .faq-q {
    font-size: 1.1rem;
    margin-bottom: var(--space-2);
    color: var(--text);
    display: flex;
    align-items: center;
    gap: var(--space-2);
  }
  
  .faq-q::before {
    content: 'Q';
    color: var(--primary);
    font-weight: 700;
  }
  
  .faq-a {
    padding-left: 1.5rem;
    color: var(--text-light);
  }
</style>

<script>
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, { threshold: 0.1 });
  
  document.querySelectorAll('.scroll-fade-up').forEach(el => observer.observe(el));
</script>
